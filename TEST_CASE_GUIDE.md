# Rich å¤§å¯Œç¿ç¨‹åº - æµ‹è¯•ç”¨ä¾‹ç®¡ç†æŒ‡å—

## ðŸ“ æµ‹è¯•ç”¨ä¾‹ç»“æž„

æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹éƒ½ä½äºŽç‹¬ç«‹çš„æ–‡ä»¶å¤¹ä¸­ï¼ŒåŒ…å«ä»¥ä¸‹æ ‡å‡†æ–‡ä»¶ï¼š

```
integration_tests/test_cases/
â”œâ”€â”€ case1_helloworld/
â”‚   â”œâ”€â”€ cmdlist.txt          # æµ‹è¯•å‘½ä»¤åˆ—è¡¨
â”‚   â”œâ”€â”€ expected_result.txt  # æœŸæœ›è¾“å‡ºç»“æžœ
â”‚   â””â”€â”€ description.txt      # æµ‹è¯•ç”¨ä¾‹æè¿°
â”œâ”€â”€ case2_help/
â”‚   â”œâ”€â”€ cmdlist.txt
â”‚   â”œâ”€â”€ expected_result.txt
â”‚   â””â”€â”€ description.txt
â””â”€â”€ ...
```

## ðŸ“ æ–‡ä»¶è¯´æ˜Ž

### cmdlist.txt - æµ‹è¯•å‘½ä»¤æ–‡ä»¶
åŒ…å«è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ¯è¡Œä¸€ä¸ªå‘½ä»¤å‚æ•°ï¼š
```
# ç¤ºä¾‹1: å•ä¸ªå‘½ä»¤
testhelloworld

# ç¤ºä¾‹2: å¤šä¸ªå‘½ä»¤
help
version

# ç¤ºä¾‹3: å¤æ‚å‘½ä»¤åºåˆ—ï¼ˆæ‚¨æåˆ°çš„å¤§å¯Œç¿æ¸¸æˆæ ¼å¼ï¼‰
preset user AQSJ
preset map 0 A 1
preset fund A 1000
step 5
dump
```

### expected_result.txt - æœŸæœ›ç»“æžœæ–‡ä»¶
åŒ…å«å‘½ä»¤æ‰§è¡ŒåŽçš„æœŸæœ›è¾“å‡ºï¼š
```
Hello, World!
```

### description.txt - æè¿°æ–‡ä»¶
åŒ…å«æµ‹è¯•ç”¨ä¾‹çš„è¯´æ˜Žä¿¡æ¯ï¼š
```
æµ‹è¯•ç”¨ä¾‹1: Hello WorldåŸºæœ¬åŠŸèƒ½æµ‹è¯•
æè¿°: æµ‹è¯•rich testhelloworldå‘½ä»¤æ˜¯å¦æ­£ç¡®è¾“å‡ºHello, World!
é¢„æœŸ: ç¨‹åºæ­£å¸¸é€€å‡ºå¹¶è¾“å‡ºHello, World!
```

## ðŸš€ æ·»åŠ æ–°æµ‹è¯•ç”¨ä¾‹çš„æ­¥éª¤

### æ­¥éª¤1ï¼šåˆ›å»ºæµ‹è¯•ç”¨ä¾‹æ–‡ä»¶å¤¹
```bash
mkdir -p integration_tests/test_cases/case5_newfeature
```

### æ­¥éª¤2ï¼šåˆ›å»ºå‘½ä»¤æ–‡ä»¶
```bash
echo "newcommand" > integration_tests/test_cases/case5_newfeature/cmdlist.txt
```

### æ­¥éª¤3ï¼šç”ŸæˆæœŸæœ›ç»“æžœ
```bash
# å…ˆå®žçŽ°åŠŸèƒ½ï¼Œç„¶åŽç”ŸæˆæœŸæœ›ç»“æžœ
./rich newcommand > integration_tests/test_cases/case5_newfeature/expected_result.txt
```

### æ­¥éª¤4ï¼šæ·»åŠ æè¿°æ–‡ä»¶
```bash
cat > integration_tests/test_cases/case5_newfeature/description.txt << 'EOF'
æµ‹è¯•ç”¨ä¾‹5: æ–°åŠŸèƒ½æµ‹è¯•
æè¿°: æµ‹è¯•æ–°å®žçŽ°çš„åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ
é¢„æœŸ: ç¨‹åºæ­£ç¡®æ‰§è¡Œå¹¶è¾“å‡ºé¢„æœŸç»“æžœ
EOF
```

### æ­¥éª¤5ï¼šè¿è¡Œæµ‹è¯•éªŒè¯
```bash
make test
```

## ðŸŽ¯ TDDå¼€å‘æµç¨‹ä¸­çš„æµ‹è¯•ç”¨ä¾‹ç®¡ç†

### çº¢è‰²é˜¶æ®µ - åˆ›å»ºå¤±è´¥çš„æµ‹è¯•
```bash
# 1. åˆ›å»ºæ–°æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶å¤¹
mkdir -p integration_tests/test_cases/case_dice_roll

# 2. å®šä¹‰å‘½ä»¤
echo "dice" > integration_tests/test_cases/case_dice_roll/cmdlist.txt

# 3. å®šä¹‰æœŸæœ›ç»“æžœï¼ˆå³ä½¿åŠŸèƒ½è¿˜æœªå®žçŽ°ï¼‰
echo "æŽ·éª°å­ç»“æžœ: 4" > integration_tests/test_cases/case_dice_roll/expected_result.txt

# 4. æ·»åŠ æè¿°
cat > integration_tests/test_cases/case_dice_roll/description.txt << 'EOF'
æµ‹è¯•ç”¨ä¾‹: æŽ·éª°å­åŠŸèƒ½æµ‹è¯•
æè¿°: æµ‹è¯•diceå‘½ä»¤æ˜¯å¦èƒ½æ­£ç¡®æŽ·éª°å­
é¢„æœŸ: è¾“å‡ºæŽ·éª°å­ç»“æžœ
EOF

# 5. è¿è¡Œæµ‹è¯• - åº”è¯¥å¤±è´¥
make test
```

### ç»¿è‰²é˜¶æ®µ - å®žçŽ°æœ€å°åŠŸèƒ½è®©æµ‹è¯•é€šè¿‡
```bash
# åœ¨ä»£ç ä¸­å®žçŽ°diceåŠŸèƒ½...

# è¿è¡Œæµ‹è¯• - åº”è¯¥é€šè¿‡
make test
```

### é‡æž„é˜¶æ®µ - æ”¹è¿›å®žçŽ°
```bash
# é‡æž„ä»£ç ...

# ç¡®ä¿æµ‹è¯•ä»ç„¶é€šè¿‡
make test
```

## ðŸ§ª é«˜çº§æµ‹è¯•ç”¨ä¾‹ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šå¤šå‘½ä»¤åºåˆ—æµ‹è¯•
```bash
# cmdlist.txt
help
version
testhelloworld

# expected_result.txt
Rich - å¤§å¯Œç¿ç¨‹åº
ç”¨æ³•:
  rich testhelloworld    - è¿è¡Œhello worldæµ‹è¯•
  rich version          - æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
  rich help             - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
Rich v1.0.0 - å¤§å¯Œç¿ç¨‹åºé›†æˆæµ‹è¯•ç‰ˆ
Hello, World!
```

### ç¤ºä¾‹2ï¼šé”™è¯¯å¤„ç†æµ‹è¯•
```bash
# cmdlist.txt
nonexistentcommand

# expected_result.txt
é”™è¯¯: æœªçŸ¥å‘½ä»¤ 'nonexistentcommand'
Rich - å¤§å¯Œç¿ç¨‹åº
ç”¨æ³•:
  rich testhelloworld    - è¿è¡Œhello worldæµ‹è¯•
  rich version          - æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
  rich help             - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

### ç¤ºä¾‹3ï¼šå¤æ‚æ¸¸æˆçŠ¶æ€æµ‹è¯•ï¼ˆæ‚¨æåˆ°çš„å¤§å¯Œç¿æ ¼å¼ï¼‰
```bash
# cmdlist.txt
preset user AQSJ
preset map 0 A 1
preset map 1 Q 2
preset fund A 1000
preset fund Q 3000
preset userloc A 0
preset userloc Q 1
preset nextuser A
step 3
dump

# expected_result.txt
user AQS
map[0] A 1
map[1] Q 2
fund A 1000
fund Q 3000
userloc A 3
userloc Q 1
nextuser Q
```

## ðŸ”§ æµ‹è¯•ç³»ç»Ÿç‰¹æ€§

### è‡ªåŠ¨å‘çŽ°
- æµ‹è¯•ç³»ç»Ÿè‡ªåŠ¨å‘çŽ° `integration_tests/test_cases/` ä¸‹çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹
- æŒ‰æ–‡ä»¶å¤¹åç§°å­—æ¯é¡ºåºæ‰§è¡Œæµ‹è¯•

### çµæ´»çš„å‘½ä»¤æ ¼å¼
- æ”¯æŒå•è¡Œå‘½ä»¤ï¼š`testhelloworld`
- æ”¯æŒå¤šè¡Œå‘½ä»¤åºåˆ—
- æ”¯æŒæ³¨é‡Šè¡Œï¼ˆä»¥`//`å¼€å¤´ï¼‰
- æ”¯æŒç©ºè¡Œ

### è¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Š
- æ˜¾ç¤ºæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹çš„æè¿°
- æä¾›é€šè¿‡/å¤±è´¥ç»Ÿè®¡
- å¤±è´¥æ—¶æ˜¾ç¤ºè¯¦ç»†çš„å·®å¼‚ä¿¡æ¯
- ç”Ÿæˆæµ‹è¯•æ—¥å¿—æ–‡ä»¶

### æ˜“äºŽç»´æŠ¤
- æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç‹¬ç«‹ï¼Œäº’ä¸å½±å“
- æ·»åŠ æ–°æµ‹è¯•ç”¨ä¾‹æ— éœ€ä¿®æ”¹æµ‹è¯•è„šæœ¬
- æµ‹è¯•æ•°æ®å’Œæµ‹è¯•é€»è¾‘åˆ†ç¦»

## ðŸ“‹ æµ‹è¯•ç”¨ä¾‹å‘½åè§„èŒƒ

å»ºè®®çš„å‘½åæ ¼å¼ï¼š
```
case[åºå·]_[åŠŸèƒ½åç§°]/
â”œâ”€â”€ case1_helloworld/      # åŸºæœ¬åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ case2_help/            # å¸®åŠ©ä¿¡æ¯æµ‹è¯•  
â”œâ”€â”€ case3_version/         # ç‰ˆæœ¬ä¿¡æ¯æµ‹è¯•
â”œâ”€â”€ case4_invalid_cmd/     # é”™è¯¯å¤„ç†æµ‹è¯•
â”œâ”€â”€ case5_dice_roll/       # æŽ·éª°å­åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ case6_player_status/   # çŽ©å®¶çŠ¶æ€æµ‹è¯•
â””â”€â”€ case7_game_preset/     # æ¸¸æˆé¢„è®¾æµ‹è¯•
```

## ðŸŽ¯ æœ€ä½³å®žè·µ

### DO - åº”è¯¥åšçš„
- âœ… æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æµ‹è¯•ä¸€ä¸ªæ˜Žç¡®çš„åŠŸèƒ½ç‚¹
- âœ… ä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•ç”¨ä¾‹åç§°
- âœ… åœ¨description.txtä¸­æ¸…æ¥šè¯´æ˜Žæµ‹è¯•ç›®çš„
- âœ… æœŸæœ›ç»“æžœæ–‡ä»¶åŒ…å«å®Œæ•´çš„é¢„æœŸè¾“å‡º
- âœ… éµå¾ªTDDæµç¨‹ï¼šå…ˆå†™æµ‹è¯•ï¼Œå†å†™ä»£ç 

### DON'T - ä¸åº”è¯¥åšçš„
- âŒ ä¸è¦åœ¨ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ä¸­æµ‹è¯•å¤šä¸ªæ— å…³åŠŸèƒ½
- âŒ ä¸è¦ç¡¬ç¼–ç è·¯å¾„æˆ–æ—¶é—´ç›¸å…³çš„å†…å®¹
- âŒ ä¸è¦å¿˜è®°æ›´æ–°æœŸæœ›ç»“æžœæ–‡ä»¶
- âŒ ä¸è¦è·³è¿‡æµ‹è¯•éªŒè¯æ­¥éª¤

## ðŸš€ è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test

# æˆ–ç›´æŽ¥è¿è¡Œæµ‹è¯•è„šæœ¬
./integration_tests/run_all_tests.sh

# æŸ¥çœ‹æµ‹è¯•ç»“æžœæ—¥å¿—
cat integration_tests/test_results.log
```

é€šè¿‡è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹ç®¡ç†ç³»ç»Ÿï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°ä¸ºRichå¤§å¯Œç¿ç¨‹åºæ·»åŠ ä»»æ„æ•°é‡çš„æµ‹è¯•ç”¨ä¾‹ï¼Œç¡®ä¿æ¯ä¸ªåŠŸèƒ½éƒ½å¾—åˆ°å……åˆ†æµ‹è¯•ï¼